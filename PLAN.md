# 2A 프로토콜 구구단 프로젝트 계획

## 프로젝트 개요
두 개의 독립적인 AI 에이전트가 API를 통해 통신하며 구구단 문제를 해결하는 시스템을 구현합니다. 슈퍼바이저 에이전트가 전체 과정을 조율합니다.

## 아키텍처
- **슈퍼바이저 에이전트**: 사용자 요청 처리 및 에이전트 간 조율
- **에이전트1(문제 생성기)**: 포트 5000, 구구단 문제 생성
- **에이전트2(답변기)**: 포트 6000, 문제에 대한 답변 제공
- **웹 인터페이스**: 포트 8000, Vue3 기반 채팅 인터페이스로 사용자 요청 입력 및 진행 과정 모니터링

## 작동 흐름
1. 사용자가 채팅창에 "N단 구구단을 진행해줘. 정답이 M에 도달하면 멈춰줘"와 같은 형식으로 요청합니다.
   - 종료 조건(M)이 지정되지 않은 경우, 기본값으로 N×9(9회)까지만 수행합니다.
2. 슈퍼바이저가 요청 해석 후 에이전트1에 지시
3. 에이전트1이 "N×1=" 형태의 문제 생성
4. 에이전트1이 API를 통해 에이전트2에 문제 전송
5. 에이전트2가 문제 해결 후 "N×X=결과값" 형태의 답변 제공
6. 결과값이 M 이상이 되면 구구단을 중단하고 "구구단이 끝났습니다" 메시지를 채팅창에 표시합니다.
   - 또는 X가 9에 도달하면 "구구단이 끝났습니다. N단 학습 완료!" 메시지를 표시합니다.
7. 모든 과정이 채팅 인터페이스에 실시간으로 표시됩니다.

## 기술 스택
- **FastAPI**: 각 에이전트의 API 엔드포인트 구현
- **Pydantic**: 메시지 형식 검증
- **HTTP/JSON**: 에이전트 간 통신 프로토콜
- **WebSocket**: 실시간 통신 및 모니터링
- **Vue3**: 웹 인터페이스 및 채팅 UI 구현
- **Vuex/Pinia**: 상태 관리
- **TailwindCSS/Element Plus**: UI 컴포넌트 및 스타일링

## 핵심 기능
- 표준화된 메시지 형식으로 구조화된 통신
- 각 에이전트의 독립적 실행과 상태 관리
- 확장 가능한 API 기반 아키텍처
- 채팅 인터페이스를 통한 실시간 모니터링 및 사용자 상호작용

## 구현 단계
1. 기본 프로젝트 구조 설정
2. 각 에이전트 API 서버 구현
3. 메시지 스키마 정의
4. 슈퍼바이저 에이전트 구현
5. Vue3 기반 채팅 인터페이스 및 모니터링 시스템 구현
6. 통합 테스트
7. 오류 처리 및 로깅 기능 추가

## 모니터링 시스템
- Vue3 기반 채팅 인터페이스를 통해 전체 과정 실시간 모니터링
- 채팅 방식의 사용자 입력 UI 제공
  - 사용자 메시지는 우측에 표시
  - 시스템/에이전트 메시지는 좌측에 표시
- 구구단 문제와 답변이 채팅 메시지 형태로 순차적으로 표시
- 특정 값(M)에 도달하면 "구구단이 끝났습니다" 메시지 표시
- 에이전트 간 통신 내용 시각화
- 각 에이전트 상태 표시 (활성/비활성)
- 시스템 로그 및 오류 메시지 채팅창에 표시

## 채팅 인터페이스 디자인
- 모바일 친화적인 반응형 디자인
- 상단: 에이전트 상태 표시 영역
- 중앙: 채팅 메시지 표시 영역
  - 사용자 요청 (예: "4단 구구단 시작해줘. 정답이 60에 도달하면 멈춰줘")
  - 슈퍼바이저 응답 (예: "4단 구구단을 시작합니다")
  - 문제 생성 (예: "4×1=")
  - 답변 표시 (예: "4×1=4")
  - 종료 메시지 (예: "정답이 60에 도달했습니다. 구구단이 끝났습니다")
- 하단: 메시지 입력창 및 전송 버튼

## 슈퍼바이저 에이전트 프롬프트
당신은 구구단 학습 시스템의 슈퍼바이저입니다. 사용자 요청을 해석하고 에이전트들의 작업을 조율합니다.

1. 사용자 요청에서 구구단 단수(N)와 종료 값(M)을 추출합니다.
   - 종료 값(M)이 명시되지 않은 경우, 기본값으로 N×9까지만 진행합니다.
   - 무한 루프를 방지하기 위해 항상 종료 조건을 설정합니다.
2. 에이전트1에게 N단 구구단 생성을 지시합니다.
3. 에이전트1과 에이전트2 사이의 소통을 모니터링합니다.
4. 결과값이 M 이상이 되거나 X가 9에 도달하면 구구단을 중단하도록 에이전트들에게 지시합니다.
5. 중간 진행 상황과 최종 결과를 사용자에게 알립니다.

전체 구구단 과정을 효율적으로 관리하고, 사용자 요청에 정확히 응답합니다.

## 에이전트1 (문제 생성기) 프롬프트
당신은 구구단 문제를 생성하는 에이전트입니다. 슈퍼바이저로부터 단수를 받아 순차적으로 문제를 생성합니다.

1. 슈퍼바이저로부터 "N단 생성"과 같은 지시를 받으면, N단 구구단 문제를 순차적으로 생성합니다.
2. 문제는 "N×1=", "N×2=" 형식으로 생성합니다.
3. 생성한 문제를 JSON 형태로 답변기 에이전트에게 전송합니다: {"problem": "N×X="}
4. 다음 X 값으로 진행할지 슈퍼바이저의 지시를 기다립니다.

정확한 구구단 문제 형식을 유지하고, 슈퍼바이저의 지시에 따라 작동합니다.

## 에이전트2 (답변기) 프롬프트
당신은 구구단 문제의 답을 계산하는 에이전트입니다. 문제 생성기로부터 문제를 받아 정확한 답을 계산합니다.

1. 문제 생성기로부터 {"problem": "N×X="} 형식의 JSON 데이터를 받습니다.
2. 수식을 분석하여 N과 X 값을 추출합니다.
3. N×X 계산을 수행합니다.
4. 계산 결과를 JSON 형태로 반환합니다: {"answer": 결과값, "calculation": "N×X=결과값"}
5. 슈퍼바이저가 결과를 검토할 때까지 대기합니다.

항상 정확한 계산을 수행하고, 오류 없는 결과를 제공합니다.

## 예시 사용자 요청
```
4단 구구단 시작해줘. 정답이 60에 도달하면 멈춰줘.
```

또는 종료 조건 없이:
```
4단 구구단 시작해줘.
```

## 예시 시스템 응답 흐름
```
사용자: 4단 구구단 시작해줘. 정답이 60에 도달하면 멈춰줘.
시스템: 4단 구구단을 시작합니다. 정답이 60에 도달하면 멈추겠습니다.
시스템: 4×1=
시스템: 4×1=4
시스템: 4×2=
시스템: 4×2=8
...
시스템: 4×15=
시스템: 4×15=60
시스템: 정답이 60에 도달했습니다. 구구단이 끝났습니다.
```

종료 조건이 없는 경우:
```
사용자: 4단 구구단 시작해줘.
시스템: 4단 구구단을 시작합니다. 4×9까지 진행하겠습니다.
시스템: 4×1=
시스템: 4×1=4
...
시스템: 4×9=
시스템: 4×9=36
시스템: 구구단이 끝났습니다. 4단 학습 완료!